<h1><%= listing.city %></h1>

<!-- Listing Details -->
<p><strong>Price:</strong> $<%= listing.price %></p>
<p><strong>Description:</strong> <%= listing.description %></p>

<!-- Edit/Delete buttons only if the user owns the listing -->
<% if (user && user._id === listing.owner?.toString()) { %>
  <a href="/listings/<%= listing._id %>/edit">Edit</a>

  <!-- Delete uses method-override -->
  <form action="/listings/<%= listing._id %>?_method=DELETE" method="POST" style="display:inline;">
    <button type="submit">Delete</button>
  </form>
<% } %>

<!-- Back to listings link -->
<a href="/listings">‚Üê Back to all bookings</a>


<!-- delete listing -->

<a href="/listings/<%= listing._id %>/edit">Edit</a>




<!-- Delete Button -->
<button id="showConfirmBox">Delete</button>

<!-- Hidden Form -->
<form id="delete-form" action="/listings/<%= listing._id %>?_method=DELETE" method="POST" style="display: none;"></form>


<!-- Simple Confirm Box -->
<div id="confirmBox" style="display:none; border:1px solid #ca0707; padding:20px; margin-top:15px; width:300px;">
    <p>Are you sure you want to delete this booking?</p>
    <button onclick="submitDelete()">Yes, delete</button>
    <button onclick="hideConfirmBox()">Cancel</button>
  </div>
  
  <script>
    const showConfirm = document.getElementById('showConfirmBox');
    const confirmBox = document.getElementById('confirmBox');
    const deleteForm = document.getElementById('delete-form');
  
    showConfirm.addEventListener('click', () => {
      confirmBox.style.display = 'block';
    });
  
    function hideConfirmBox() {
      confirmBox.style.display = 'none';
    }
  
    function submitDelete() {
      deleteForm.submit();
    }
  </script>
  

